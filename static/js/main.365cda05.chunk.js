(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{33:function(e,t,a){},37:function(e,t,a){e.exports=a(66)},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},57:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),o=a.n(c),l=(a(42),a(9)),u=a(3),i=a(2),s=(a(43),a(12)),m=a.n(s),p=a(15),E=a(8),d=Object(n.createContext)({user:null}),b=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){E.auth.onAuthStateChanged(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(d.Provider,{value:c},e.children)},f=function(){var e=Object(n.useContext)(d);return r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,e.displayName))},h=function(e,t,a){var r=Object(n.useState)(0),c=Object(i.a)(r,2),o=c[0],l=c[1],u=Object(n.useState)(null),s=Object(i.a)(u,2),d=s[0],b=s[1],f=Object(n.useState)(null),h=Object(i.a)(f,2),O=h[0],g=h[1];return Object(n.useEffect)((function(){var n=E.projectStorage.ref(e.name),r=E.projectFirestore.collection("images");n.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){b(e)}),Object(p.a)(m.a.mark((function e(){var c,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:c=e.sent,o=Object(E.timestamp)(),l=t,r.add({url:c,createdAt:o,createdBy:l,displayName:a}),g(c);case 7:case"end":return e.stop()}}),e)}))))}),[e,t,a]),{progress:o,url:O,error:d}},O=a(14),g=(a(49),function(e){var t=e.file,a=e.setFile,c=Object(n.useContext)(d),o=h(t,c.uid,c.displayName),l=o.url,u=o.progress,s=o.error,m=Object(n.useState)(""),p=Object(i.a)(m,2),E=p[0],b=p[1];return Object(n.useEffect)((function(){l&&a(null),s&&b("Something went wrong. Please try again later!")}),[l,a,s]),r.a.createElement(r.a.Fragment,null,E?r.a.createElement("div",{className:"error"},E):r.a.createElement(O.a.div,{className:"progress-bar",initial:{width:0},animate:{width:u+"%"}}))}),v=(a(50),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),u=l[0],s=l[1],m=["image/png","image/jpeg","image/jpg"];return r.a.createElement("form",{className:"upload-form"},r.a.createElement("label",null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(c(t),s("")):(c(null),s("Please select and image file (png, jpeg or jpg)"))}}),r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"output"},u&&r.a.createElement("div",{className:"error"},u),a&&r.a.createElement("div",null,a.name),a&&r.a.createElement(g,{file:a,setFile:c})))}),j=a(19),S=function(e,t){var a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=E.projectFirestore.collection(e).where("createdBy","==",t).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id}))})),o(t)}));return function(){return a()}}),[e,t]),{docs:c}},_=(a(51),function(e){var t=e.setSelectedImage,a=Object(n.useContext)(d),c=S("images",a.uid).docs;return r.a.createElement("div",{className:"img-grid"},c&&c.map((function(e){return r.a.createElement(O.a.div,{whileHover:{opacity:1},layout:!0,className:"img-wrap",key:e.id,onClick:function(){return t(e.url)}},r.a.createElement(O.a.img,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},src:e.url,alt:"uploaded pic"}))})))}),A=(a(52),function(e){var t=e.selectedImage,a=e.setSelectedImage;return r.a.createElement(O.a.div,{initial:{opacity:0},animate:{opacity:1},className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},r.a.createElement(O.a.img,{initial:{y:"-100vh"},animate:{y:0},src:t,alt:"enlarged pic"}))}),P=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useContext)(d)?r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(v,null),r.a.createElement(_,{setSelectedImage:c}),a&&r.a.createElement(A,{selectedImage:a,setSelectedImage:c})):r.a.createElement(u.a,{to:"/login"})},N=(a(57),function(){var e=Object(n.useContext)(d);return r.a.createElement("div",{className:"nav-wrap"},r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("span",{className:"logo"},r.a.createElement(l.b,{to:"/home"},"Photo App")),r.a.createElement("span",{className:"spacer"}),r.a.createElement("ul",null,e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/logout"},"Log out")),!e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/login"},"Log in")),!e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/signup"},"Sign up")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/profile"},"Profile")))))}),y=a(36),C=(a(33),a(64),function(){return r.a.createElement("div",{className:"loader"})}),T=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),E=s[0],b=s[1],f=Object(n.useState)(!1),h=Object(i.a)(f,2),O=h[0],g=h[1],v=Object(n.useState)(""),j=Object(i.a)(v,2),S=j[0],_=j[1],A=Object(n.useContext)(d),P=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,g(!0),e.next=5,Object(y.auth)().signInWithEmailAndPassword(a,E);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),g(!1),_(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return A?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",{className:"auth-wrap"},O?r.a.createElement(C,null):r.a.createElement("form",{onSubmit:P},r.a.createElement("span",null,"Log in"),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",name:"email",onChange:function(e){return c(e.currentTarget.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",onChange:function(e){return b(e.currentTarget.value)}}),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("button",{type:"submit",className:"button button-primary"},"Log in"),r.a.createElement(l.b,{to:"/signup",className:"button button-secondary"},"Sign up"))),S&&r.a.createElement("div",{className:"error"},S))},w=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],m=l[1];return Object(n.useEffect)((function(){E.auth.signOut().then((function(){c(!0)})).catch(m(s))}),[s]),a?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",null,s.message)},I=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],b=l[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),O=h[0],g=h[1],v=Object(n.useState)(""),j=Object(i.a)(v,2),S=j[0],_=j[1],A=Object(n.useState)(!1),P=Object(i.a)(A,2),N=P[0],y=P[1],T=Object(n.useContext)(d),w=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!I()){e.next=12;break}return e.prev=2,y(!0),e.next=6,E.auth.createUserWithEmailAndPassword(a,s).then((function(e){e.user.updateProfile({displayName:O})}));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),y(!1),_(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=!0;return O.length<3&&(_("Username must be minimum 3 characters."),e=!1),s.length<6&&(_("Password must be minimum 6 characters"),e=!1),e};return T?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",{className:"auth-wrap"},N?r.a.createElement(C,null):r.a.createElement("form",{onSubmit:w},r.a.createElement("span",null,"Sign up"),r.a.createElement("label",{htmlFor:"userName"},"Username:"),r.a.createElement("input",{type:"text",name:"userName",required:!0,onChange:function(e){return g(e.currentTarget.value)}}),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",name:"email",onChange:function(e){c(e.currentTarget.value),_("")},required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",required:!0,onChange:function(e){return b(e.currentTarget.value)}}),r.a.createElement("button",{type:"submit",className:"button button-primary"},"Sign up")),S&&r.a.createElement("div",{className:"error"},S))},R=a(0),D=R.useState,x=R.useEffect,k=a(8).projectFirestore,U=function(e){var t=D([]),a=Object(i.a)(t,2),n=a[0],r=a[1];return x((function(){var t=k.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{doc:n}},F=(a(65),function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),u=l[0],s=l[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),E=p[0],d=p[1],b=U("images").doc,f=Object(n.useRef)(0);return Object(n.useEffect)((function(){s(!0),0===b.length&&(f.current=f.current+1),f.current>=2?(s(!1),c("There has been an issue. Please try agin later.")):(s(!1),c(""))}),[b]),r.a.createElement("div",{className:"home-wrap"},0!==b.length?b.map((function(e){return r.a.createElement(O.a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delkay:1},key:e.id,className:"card"},r.a.createElement("span",{className:"created-by"},e.displayName),r.a.createElement("div",{className:"home-image-wrap",onClick:function(){return d(e.url)}},r.a.createElement("img",{src:e.url,alt:"uploaded pic"})))})):u?r.a.createElement(C,null):r.a.createElement("div",{className:"error"},a),E&&r.a.createElement(A,{selectedImage:E,setSelectedImage:d}))});var L=function(){return r.a.createElement(l.a,null,r.a.createElement(b,null,r.a.createElement(N,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"",component:F}),r.a.createElement(u.b,{exact:!0,path:"/logout",component:w}),r.a.createElement(u.b,{exact:!0,path:"/login",component:T}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:I}),r.a.createElement(u.b,{exact:!0,path:"/profile",component:P}),r.a.createElement(u.b,{exact:!0,path:"/home",component:F}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))},8:function(e,t,a){"use strict";a.r(t),a.d(t,"projectStorage",(function(){return o})),a.d(t,"projectFirestore",(function(){return l})),a.d(t,"timestamp",(function(){return u})),a.d(t,"auth",(function(){return i}));var n=a(20),r=a.n(n),c=(a(45),a(46),a(48),{apiKey:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",authDomain:"photo-app-6e269.firebaseapp.com",databaseURL:"https://photo-app-6e269.firebaseio.com",projectId:"photo-app-6e269",storageBucket:"photo-app-6e269.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/photo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",REACT_APP_AUTH_DOMAIN:"photo-app-6e269.firebaseapp.com",REACT_APP_DATABASE_URL:"https://photo-app-6e269.firebaseio.com",REACT_APP_PROJECT_ID:"photo-app-6e269",REACT_APP_STORAGE_BUCKET:"photo-app-6e269.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"908139565967",REACT_APP_APP_ID:"1:908139565967:web:124a5a772eac091cddb1fa"}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/photo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",REACT_APP_AUTH_DOMAIN:"photo-app-6e269.firebaseapp.com",REACT_APP_DATABASE_URL:"https://photo-app-6e269.firebaseio.com",REACT_APP_PROJECT_ID:"photo-app-6e269",REACT_APP_STORAGE_BUCKET:"photo-app-6e269.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"908139565967",REACT_APP_APP_ID:"1:908139565967:web:124a5a772eac091cddb1fa"}).APP_ID});r.a.initializeApp(c);var o=r.a.storage(),l=r.a.firestore(),u=r.a.firestore.FieldValue.serverTimestamp,i=r.a.auth()}},[[37,1,2]]]);
//# sourceMappingURL=main.365cda05.chunk.js.map