(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{32:function(e,t,a){},36:function(e,t,a){e.exports=a(64)},41:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),o=a.n(c),l=(a(41),a(8)),u=a(3),i=a(2),s=(a(42),a(11)),m=a.n(s),p=a(13),E=a(18),b=a.n(E),d=(a(44),a(45),a(47),{apiKey:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",authDomain:"photo-app-6e269.firebaseapp.com",databaseURL:"https://photo-app-6e269.firebaseio.com",projectId:"photo-app-6e269",storageBucket:"photo-app-6e269.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/photo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",REACT_APP_AUTH_DOMAIN:"photo-app-6e269.firebaseapp.com",REACT_APP_DATABASE_URL:"https://photo-app-6e269.firebaseio.com",REACT_APP_PROJECT_ID:"photo-app-6e269",REACT_APP_STORAGE_BUCKET:"photo-app-6e269.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"908139565967",REACT_APP_APP_ID:"1:908139565967:web:124a5a772eac091cddb1fa"}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/photo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyDTgmtx05uorba28elW5d0ZSNZLCt2tFcU",REACT_APP_AUTH_DOMAIN:"photo-app-6e269.firebaseapp.com",REACT_APP_DATABASE_URL:"https://photo-app-6e269.firebaseio.com",REACT_APP_PROJECT_ID:"photo-app-6e269",REACT_APP_STORAGE_BUCKET:"photo-app-6e269.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"908139565967",REACT_APP_APP_ID:"1:908139565967:web:124a5a772eac091cddb1fa"}).APP_ID});b.a.initializeApp(d);var f=b.a.storage(),h=b.a.firestore(),O=b.a.firestore.FieldValue.serverTimestamp,v=b.a.auth(),g=Object(n.createContext)({user:null}),S=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){v.onAuthStateChanged(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(g.Provider,{value:c},e.children)},_=function(){var e=Object(n.useContext)(g);return r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,e.displayName),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."))},j=function(e,t){var a=Object(n.useState)(0),r=Object(i.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)(null),u=Object(i.a)(l,2),s=u[0],E=u[1],b=Object(n.useState)(null),d=Object(i.a)(b,2),v=d[0],g=d[1];return Object(n.useEffect)((function(){var a=f.ref(e.name),n=h.collection("users").doc(t).collection("userImages");a.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;o(t)}),(function(e){E(e)}),Object(p.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getDownloadURL();case 2:t=e.sent,r=O(),n.add({url:t,createdAt:r}),g(t);case 6:case"end":return e.stop()}}),e)}))))}),[e,t]),{progress:c,url:v,error:s}},A=a(14),P=(a(48),function(e){var t=e.file,a=e.setFile,c=Object(n.useContext)(g),o=j(t,c.uid),l=o.url,u=o.progress;return Object(n.useEffect)((function(){l&&a(null)}),[l,a]),r.a.createElement(A.a.div,{className:"progress-bar",initial:{width:0},animate:{width:u+"%"}})}),C=(a(49),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),u=l[0],s=l[1],m=["image/png","image/jpeg","image/jpg"];return r.a.createElement("form",{className:"upload-form"},r.a.createElement("label",null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(c(t),s("")):(c(null),s("Please select and image file (png, jpeg or jpg)"))}}),r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"output"},u&&r.a.createElement("div",{className:"error"},u),a&&r.a.createElement("div",null,a.name),a&&r.a.createElement(P,{file:a,setFile:c})))}),T=a(25),N=function(e,t){var a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=h.collection(e).doc(t).collection("userImages").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(T.a)(Object(T.a)({},e.data()),{},{id:e.id}))})),o(t)}));return function(){return a()}}),[e,t]),{docs:c}},y=(a(50),function(e){var t=e.setSelectedImage,a=Object(n.useContext)(g),c=N("users",a.uid).docs;return r.a.createElement("div",{className:"img-grid"},c&&c.map((function(e){return r.a.createElement(A.a.div,{whileHover:{opacity:1},layout:!0,className:"img-wrap",key:e.id,onClick:function(){return t(e.url)}},r.a.createElement(A.a.img,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},src:e.url,alt:"uploaded pic"}))})))}),I=(a(51),function(e){var t=e.selectedImage,a=e.setSelectedImage;return r.a.createElement(A.a.div,{initial:{opacity:0},animate:{opacity:1},className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},r.a.createElement(A.a.img,{initial:{y:"-100vh"},animate:{y:0},src:t,alt:"enlarged pic"}))}),w=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useContext)(g)?r.a.createElement("div",{className:"App"},r.a.createElement(_,null),r.a.createElement(C,null),r.a.createElement(y,{setSelectedImage:c}),a&&r.a.createElement(I,{selectedImage:a,setSelectedImage:c})):r.a.createElement(u.a,{to:"/login"})},D=(a(56),function(){var e=Object(n.useContext)(g);return r.a.createElement("div",{className:"nav-wrap"},r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("span",{className:"logo"},r.a.createElement(l.b,{to:"/home"},"Photo App")),r.a.createElement("span",{className:"spacer"}),r.a.createElement("ul",null,e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/logout"},"Log out")),!e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/login"},"Log in")),!e&&r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/signup"},"Sign up")),r.a.createElement("li",{className:"nav-link"},r.a.createElement(l.b,{to:"/profile"},"Profile")))))}),R=a(35),x=(a(32),a(63),function(){return r.a.createElement("div",{className:"loader"})}),k=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),E=s[0],b=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),h=f[0],O=f[1],v=Object(n.useState)(""),S=Object(i.a)(v,2),_=S[0],j=S[1],A=Object(n.useContext)(g),P=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,O(!0),e.next=5,Object(R.auth)().signInWithEmailAndPassword(a,E);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),O(!1),j(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return A?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",{className:"auth-wrap"},h?r.a.createElement(x,null):r.a.createElement("form",{onSubmit:P},r.a.createElement("span",null,"Log in"),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",name:"email",onChange:function(e){return c(e.currentTarget.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",onChange:function(e){return b(e.currentTarget.value)}}),r.a.createElement("div",{className:"button-wrap"},r.a.createElement("button",{type:"submit",className:"button button-primary"},"Log in"),r.a.createElement(l.b,{to:"/signup",className:"button button-secondary"},"Sign up"))),_&&r.a.createElement("div",{className:"error"},_))},U=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],m=l[1];return Object(n.useEffect)((function(){v.signOut().then((function(){c(!0)})).catch(m(s))}),[s]),a?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",null,s.message)},L=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],E=l[1],b=Object(n.useState)(""),d=Object(i.a)(b,2),f=d[0],h=d[1],O=Object(n.useState)(""),S=Object(i.a)(O,2),_=S[0],j=S[1],A=Object(n.useState)(!1),P=Object(i.a)(A,2),C=P[0],T=P[1],N=Object(n.useContext)(g),y=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!I()){e.next=12;break}return e.prev=2,T(!0),e.next=6,v.createUserWithEmailAndPassword(a,s).then((function(e){e.user.updateProfile({displayName:f})}));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),T(!1),j(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=!0;return f.length<3&&(j("Username must be minimum 3 characters."),e=!1),s.length<6&&(j("Password must be minimum 6 characters"),e=!1),e};return N?r.a.createElement(u.a,{to:"/home"}):r.a.createElement("div",{className:"auth-wrap"},C?r.a.createElement(x,null):r.a.createElement("form",{onSubmit:y},r.a.createElement("span",null,"Sign up"),r.a.createElement("label",{htmlFor:"userName"},"Username:"),r.a.createElement("input",{type:"text",name:"userName",required:!0,onChange:function(e){return h(e.currentTarget.value)}}),r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",name:"email",onChange:function(e){c(e.currentTarget.value),j("")},required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",required:!0,onChange:function(e){return E(e.currentTarget.value)}}),r.a.createElement("button",{type:"submit",className:"button button-primary"},"Sign up")),_&&r.a.createElement("div",{className:"error"},_))},F=function(){return r.a.createElement("div",null,"Home")};var K=function(){return r.a.createElement(l.a,null,r.a.createElement(S,null,r.a.createElement(D,null),r.a.createElement(u.b,{exact:!0,path:"/logout",component:U}),r.a.createElement(u.b,{exact:!0,path:"/login",component:k}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:L}),r.a.createElement(u.b,{exact:!0,path:"/profile",component:w}),r.a.createElement(u.b,{path:"/home",component:F})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.889811d0.chunk.js.map